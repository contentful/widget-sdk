$cf-progress-bar-height = 7px
$cf-progress-bar-bg-size = 20px
$cf-progress-bar-anim-speed = 2s

.cf-progress-bar 
  height: $cf-progress-bar-height
  position: relative
  border: 1px solid $gray
  box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3)

.cf-progress-bar > span
  display: block
  position: relative
  height: $cf-progress-bar-height - 2
  overflow: hidden

.cf-progress-bar > span:after,
.animate > span > span
  content: ""
  overflow: hidden
  $stretch()
  background-image: linear-gradient(-45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent)
  z-index: 1
  background-size: $cf-progress-bar-bg-size $cf-progress-bar-bg-size
  animation: move $cf-progress-bar-anim-speed linear infinite

@keyframes move
  0%
    background-position: 0 0
  100%
    background-position: $cf-progress-bar-bg-size $cf-progress-bar-bg-size

.cf-progress-bar
  &.animate > span:after
    display: none

  &.green> span
    background-color: $green

  &.red > span
    background-color: $red

  &.nostripes > span > span,
  &.nostripes > span:after
    animation: none
    background-image: none
