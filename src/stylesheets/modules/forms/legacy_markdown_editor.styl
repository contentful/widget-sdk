$markdown-editor-height = 400px
$markdown-guide-height = 25px

.cf-legacy-markdown-editor
  position: relative

.markdown-legacy-toolbar,
.markdown-legacy-modeswitch
  padding: 7px 4px 1px

.markdown-legacy-toolbar
  display: flex
  $form-control-theme()
  position: relative
  height: 35px
  border-radius: 3px 3px 0 0
  border: 1px solid $gray-light
  &:focus, &.opaque
    border-top-left-radius: 3px
    border-top-right-radius: 3px
    background-color: $gray-lightest
    border-color: $blue-link
    outline: none
  &.preview-mode
    background-color: white
    border: none
    box-shadow: none

.markdown-legacy-modeswitch
  position: absolute
  right: 0
  $stretch-y()
  border-left: 1px solid $gray-light

.markdown-legacy-textarea
  border-radius: 0 0 0 0
  box-shadow: none
  min-height: $markdown-editor-height
  border-bottom: none
  border-top: none

.markdown-legacy-preview
  position: relative
  overflow-y: auto
  padding: 9px 7px 4px
  min-height: $markdown-editor-height
  max-width: 700px
  border: 1px solid $gray-lightest
  word-wrap: break-word
  overflow-wrap: break-word
  p
    margin: 0
  p + p
    margin-top: $rhythm(0.5)
  pre,
  .markdown-image-placeholder
    margin-bottom: 22px
  hr
    background-color: $gray-medium
  ul, ol
    margin: $rhythm(0.5) 0;
    padding-left: 1.6em
  ul > li
    list-style-type: disc
  ol > li
    list-style-type: decimal

.markdown-image-placeholder
  border: 1px solid $gray-light
  text-align: center
  padding: 5px
  background: $gray-light

.legacy-toolbar-button
  width: 36px
  height: 23px
  border: none
  background-color: transparent
  background-repeat: no-repeat
  background-position: center
  background-size: 50%
  display: inline-block
  border-radius: 3px
  cursor: pointer
  &:hover
    background-color: lighten($gray, 20%)
.legacy-toolbar-button--flex
  width: auto
  flex-basis: 36px
  flex-shrink: 1

.preview-mode
  .legacy-toolbar-button:hover
    background-color: transparent
  .markdown-legacy-modeswitch
    border-left: none

.md-right-button
  display: block
  float: right

.md-bold-icon
  background-image: url('/app/images/markdown/bold.png')
.md-italic-icon
  background-image: url('/app/images/markdown/italic.png')
.md-h1-icon
  background-image: url('/app/images/markdown/h1.png')
.md-h2-icon
  background-image: url('/app/images/markdown/h2.png')
.md-h3-icon
  background-image: url('/app/images/markdown/h3.png')
.md-hr-icon
  background-image: url('/app/images/markdown/hr.png')
.md-quote-icon
  background-image: url('/app/images/markdown/quote.png')
.md-link-icon
  background-image: url('/app/images/markdown/link.png')
.md-ul-icon
  background-image: url('/app/images/markdown/ul.png')
.md-ol-icon
  background-image: url('/app/images/markdown/ol.png')
.md-code-icon
  background-image: url('/app/images/markdown/code.png')
.md-preview-icon
  background-image: url('/app/images/markdown/preview.png')
.md-edit-icon
  background-image: url('/app/images/markdown/edit.png')
.md-indent-icon
  background-image: url('/app/images/markdown/indent.png')
.md-asset-icon
  background-image: url('/app/images/markdown/asset.png')
.md-image-icon
  background-image: url('/app/images/markdown/image.png')

/**
 * Guide
 */

.markdown-guide-hint
  position: absolute
  top: 0
  left: 0
  right: 0
  height: $markdown-guide-height
  background-color: $gray-light
  border-bottom: 1px solid $gray
  padding: 3px 7px
  cursor: pointer
  color: $gray-darkest
  border-top: 1px solid $gray
  &:hover
    background-color: darken($gray-light, 10%)
  .toggle-collapse
    float: right


.cf-legacy-markdown-guide
  position: relative
  height: $markdown-guide-height
  border: 1px solid $gray
  border-radius: 0 0 3px 3px
  border-top: none
  overflow: hidden
  margin-bottom: 10px
  &.open
    height: 300px

.markdown-guide-nav
  position: absolute
  top: $markdown-guide-height
  left: 0
  bottom: 0
  width: 20%
  font-weight: bold
  background-color: $gray-light
  overflow: hidden
  li
    cursor: pointer
    color: $gray-darkest
    padding: 5px
    border-bottom: 1px solid $gray
  li:hover:not(.active)
    background-color: darken($gray-light, 10%)
  li.active
    color: white
    background-color: $blue

.markdown-guide-main
  position: absolute
  top: $markdown-guide-height
  right: 0
  bottom: 0
  width: 80%
  overflow-y: auto
  padding: 10px
  box-shadow: -1px 0px 4px rgba(0,0,0,0.3)
