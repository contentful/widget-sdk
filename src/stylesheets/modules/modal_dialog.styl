/*
Modal Dialog

Styles for modal dialogs with optional controls.
See the modal_dialog.jade template for a more complete base template for other dialogs

Markup:
// Commented out for demo purposes only
// In normal usage, the .modal-dialog element should be a child of .modal-background
//.modal-background
p
  .modal-dialog
    header.modal-dialog__header
      h1 Title
      a.close-button
    .modal-dialog__content
      p.modal-dialog__plaintext this is some plain text
      .modal-dialog__richtext
        p here is a paragraph<br>and a next line
        p here is another one
    .modal-dialog__controls
      button.cfnext-btn-primary-action
        | Confirm
      button.cfnext-btn-secondary-action
        | More

Styleguide 12.0
*/

$modal-dialog-padding = 30px
$modal-dialog-header-padding = 24px

$modal-dialog-horizontal-padding()
  padding-left: $modal-dialog-padding
  padding-right: $modal-dialog-padding

$modal-transition()
  opacity: 0
  transition: .1s opacity ease-in-out
  .modal-dialog
    opacity: .5
    transform: scale(0.9)
    transition: .1s opacity ease-in-out, .3s transform ease-in-out
  &.is-visible
    opacity: 1
    .modal-dialog
      opacity: 1
      transform: scale(1)

.modal-background
  $stretch()
  $layer('modalBackground')
  $modal-transition()
  position: fixed
  overflow-y: auto
  height: 100vh
  text-align: center
  background-color: rgba(12, 20, 28, 0.75)

  &.x--position-top:before
    content: ""
    height: 20%
    min-height: 1rem
    max-height: none
    display: block

$modal-dialog-layout()
  $layer('modalDialog')
  display: inline-block
  position: relative
  min-width: 520px
  padding: 0
  text-align: left

$modal-dialog-chrome()
  background-color: white
  border-radius: 3px
  box-shadow: 0 2px 3px rgba(0,0,0,0.35)
  border: 1px solid #979797

.modal-dialog
  $modal-dialog-chrome()
  $modal-dialog-layout()

  .dropdown-menu,
  .context-menu
    $layer('modalDialogDropdown')

  &__header
    display: flex;
    align-items: center
    padding-top: $modal-dialog-header-padding
    padding-bottom: $modal-dialog-header-padding
    $modal-dialog-horizontal-padding()
    background-color: $colors.element-light
    border-radius: 3px 3px 0 0
    border-bottom: 1px solid $colors.element-dark

    > h1
      font-size: 1.2em
      flex-grow: 1
      margin: 0

    > .close-button
      color: $colors.text-light

  &__content
    $modal-dialog-horizontal-padding()
    padding-top: $modal-dialog-padding
    padding-bottom: $rhythm(1)

  &__controls
    display: flex
    align-items: center
    // TODO this overides the hideous 15px line height for modal
    // dialogs and makes button appearance consistent
    line-height: $base-line-height
    $modal-dialog-horizontal-padding()
    padding-bottom: $modal-dialog-padding
    // Optical vertical alignment with dialog text
    margin-left: -0.2ex
    margin-right: -0.2ex
    > * + *
      margin-left: 1rem

  &__plaintext
    white-space: pre
    max-width: 520px

  &__richtext
    max-width: 520px


/*
Confirm Deletion

TODO: refactor

Used in `dialog_confirm_deletion.jade`

Markup:
.styleguide-align-horizontally
  .modal-dialog.modal-dialog--small
    .modal-dialog__header
      h1 Are you sure?
    .modal-dialog__content
      .modal-dialog__message
         | Do you really want to do this?
      .modal-dialog__hint
         | You cannot undo this later!
    .modal-dialog__controls
      button.cfnext-btn-caution
        | Delete
      button.cfnext-btn-secondary-action
        | Cancel

Styleguide 12.2
*/

.modal-dialog
  &--small
    min-width: 46ex
    max-width: 70ex
    line-height: $base-line-height

  &__hint
    color: $text-dimmed
    margin: $rhythm(1) 0 0

  &__message
    font-size: 1.14em
    margin-bottom: $rhythm(0.5)
    margin-top: 0.1em


/**
Modal Dialog Slices

Allows you to bleed background into the `modal-dialog__content`
element. You can also use it with the `$modal-dialog-slice()` mixin.

Markup:
.modal-dialog
  header.modal-dialog__header
    h1 Title
    .close-button
  .modal-dialog__content
    p Hello
    .modal-dialog__slice.styleguide-filled-box1
      p This has a background
  .modal-dialog__controls
    button.cfnext-btn-primary-action
      | Confirm

Styleguide 12.4
*/
$modal-dialog-slice()
  $modal-dialog-horizontal-padding()
  margin-left: - $modal-dialog-padding
  margin-right: - $modal-dialog-padding

.modal-dialog__slice
  $modal-dialog-slice()
