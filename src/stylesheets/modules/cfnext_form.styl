/**
 * CFNext Forms
 *
 * Build simple forms with labels, inputs, errors and option groups.
 *
 * Styleguide 30
 */

/**
 * Inputs and labels
 *
 * Markup:
 * p
 *   div.cfnext-form__field
 *     label Name
 *     input.cfnext-form__input(type="text")
 * p
 *   div.cfnext-form__field
 *     label Longer Name
 *     input.cfnext-form__input(type="text" size="50")
 * p
 *   div.cfnext-form__field
 *     label Full Name
 *     input.cfnext-form__input--full-size(type="text")
 *
 * Styleguide 30.1
 */
.cfnext-form__field
  margin-bottom: $rhythm(1.5)
  > label
    display: block
    font-weight: bold
    margin-bottom: $rhythm(0.5)

$cfnext-form-input()
  $sans-font()
  font-size: inherit
  border: 1px solid $metallic-gray
  border-radius: 3px 3px 3px 3px
  line-height: 2.2em
  padding: 0 0.5em
  transition: border 0.4s
  &:focus
    background-color: white
    border-color: $blue-link
    outline: none
  &[aria-invalid="true"]
    border-color: darken($red, 10%)
  &[readonly], &[disabled]
    color: $gray-medium
    background-color: $gray-lighter
    border: 1px solid $gray
    box-shadow: none
    transition: none
  &[type="number"]
    padding-right: 0
  textarea&
    padding-top: 0.5em
    padding-bottom: 0.5em
    line-height: 1.3

.cfnext-form__input
  $cfnext-form-input()
  max-width: 100%;

.cfnext-form__input--full-size
  $cfnext-form-input()
  width: 100%;

/**
 * Errors
 *
 * Markup:
 * p
 *   div.cfnext-form__field
 *     label Name
 *     input.cfnext-form__input(type="text" aria-invalid="true")
 *     .cfnext-form__field-error
 *       | Something went wrong!
 * p
 *   div.cfnext-form__field
 *     label Name
 *     input.cfnext-form__input(type="text" aria-invalid="true")
 *     span.cfnext-form__field-suffix-error
 *       | Something went wrong!
 * p
 *   div.cfnext-form__field
 *     label Name
 *     input.cfnext-form__input(type="text" aria-invalid="true")
 *     ul.cfnext-form__field-errors
 *       li This went wrong
 *       li And that
 *
 * Styleguide 30.2
 */
.cfnext-form__field-error,
.cfnext-form__field-errors
  margin-top: $rhythm(0.5)
  color: $red

.cfnext-form__field-errors > li
  margin-bottom: $rhythm(0.5)

.cfnext-form__field-suffix-error
  margin-left: 1.5em
  color: $red

/**
 * Option set
 *
 * Markup:
 * fieldset.cfnext-form__fieldset
 *   legend A few options
 *   .cfnext-form-option
 *     input(type="checkbox" id="option-a")
 *     .cfnext-form-option__desc
 *       label(for="option-a") Check this
 *   .cfnext-form-option
 *     input(type="checkbox" id="option-b")
 *     .cfnext-form-option__desc
 *       label(for="option-b") Or check that
 *       p You also can check both
 *   .cfnext-form-option
 *     input(type="radio" id="radio-a" name="selectme")
 *     .cfnext-form-option__desc
 *       label(for="radio-a") Select me
 *   .cfnext-form-option
 *     input(type="radio" id="radio-b" name="selectme")
 *     .cfnext-form-option__desc
 *       label(for="radio-b") Or me
 *
 * Styleguide 30.3
 */
$cfnext-form__fieldset()
  legend
    width: 100%
    flex-shrink: 0
    line-height: $rhythm(2)
    margin-bottom: $rhythm(0.5)
    font-weight: bold

.cfnext-form__fieldset
  $cfnext-form__fieldset()

.cfnext-form-option
  margin-bottom: $rhythm(1)
  $display-flexbox()

  .cfnext-form-option:last-child
    margin-bottom: 0

  > input[type="checkbox"],
  > input[type="radio"]
    align-self: flex-start
    flex-shrink: 0
    margin: 1px 0.5em 0 0

  > label
    display: block
    cursor: pointer

$text-dimmed = hsl(0, 0%, 50%)
.cfnext-form-option__desc p
  color: $text-dimmed
  margin: $rhythm(0.5) 0 0 0

.cfnext-form-option__desc label
  // Larger line height increases clickable area
  line-height:     $rhythm(1.5)
  // Negative margin makes sure the larger line height does not
  // influence the layout
  margin-top:    - $rhythm(0.5)
  margin-bottom: - $rhythm(0.5)
  display: inline-block;
  cursor: pointer

/**
 * Horizontal option set
 *
 * Note: don't use an actual fieldset tag with this class:
 * http://germanforblack.com/post/73295576875/flexbox-for-forms
 *
 * Markup:
 * .cfnext-form__fieldset--horizontal
 *   legend A few options
 *   .cfnext-form-option
 *     input(type="checkbox" id="option-a")
 *     .cfnext-form-option__desc
 *       label(for="option-a") Check this
 *   .cfnext-form-option
 *     input(type="checkbox" id="option-b")
 *     .cfnext-form-option__desc
 *       label(for="option-b") Or check that
 *   .cfnext-form-option
 *     input(type="radio" id="radio-a" name="selectme")
 *     .cfnext-form-option__desc
 *       label(for="radio-a") Select me
 *   .cfnext-form-option
 *     input(type="radio" id="radio-b" name="selectme")
 *     .cfnext-form-option__desc
 *       label(for="radio-b") Or me
 *
 * Styleguide 30.4
 */
.cfnext-form__fieldset--horizontal
  $cfnext-form__fieldset()
  $display-flexbox()
  flex-wrap: wrap

  .cfnext-form-option
    margin-right: $rhythm(2)
  .cfnext-form-option:last-child
    margin-right: 0
