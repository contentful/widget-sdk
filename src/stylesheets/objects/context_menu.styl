/**
Context Menus

Markup:
.context-menu.styleguide-noabsolute
  cf-icon.context-menu__arrow(name="arrow-up")
  ul.context-menu__items
    li Item 1
    li Item 2
    li.pseudo-class-hover Hovered
.context-menu.styleguide-noabsolute
  cf-icon.context-menu__arrow.x--bottom-left(name="arrow-up")
  .context-menu__item Item
.context-menu.styleguide-noabsolute
  cf-icon.context-menu__arrow.x--bottom-left(name="arrow-up")
  div(role="menuitem") Item 1
  div(role="menuitem" aria-disabled="true") Item 2
  hr
  div(role="menuitem") Separate
.context-menu.styleguide-noabsolute
  cf-icon.context-menu__arrow.x--top-right(name="arrow-up")
  div.context-menu__header
    | With header
  div(role="menuitem")
    | Item 1
  div(role="menuitem")
    | Item 2

Styleguide 11
*/

$cfnext-caret-size = 12px

$context-menu-item--layout()
  line-height: 1.2
  padding: 0.6rem 2rem 0.6rem 1.3rem
  margin-bottom: 0
  white-space: no-wrap
  overflow-clip-box: content-box
  overflow: hidden
  text-overflow: ellipsis
  display: block

$context-menu-item()
  $context-menu-item--layout()
  cursor: pointer
  color: $base-font-color

  &.selected
    background: $colors.light-blue

  &:hover
    background: $colors.blue
    color: white

  &[aria-disabled]
    cursor: default
    color: $text-dimmed
    background: transparent


$context-menu-base()
  $layer('dropdown')
  min-width: 19ex
  position: absolute
  padding: 0.3rem 0
  border: 1px solid $colors.light-gray
  border-radius: 2px
  background: white
  box-shadow: 0px 1px 2px 0px hsla(black, 0.1);


.context-menu
  $context-menu-base()

  &__items > *, &__item, [role="menuitem"]
    $context-menu-item()

  // FIXME this overides a lot of styles from $context-menu-item().
  // Maybe we should only use the [role="menuitem"] selector for the latter.
  hr
    margin: 0.6em 1.3em
    padding: 0
    background: $colors.light-gray
    cursor: auto
    &:hover
      background: $colors.light-gray


  &__items
    $scroll-vertically(60vh)

  &__header
    $context-menu-item--layout()
    color: $colors.text-dark
    margin: 0.3rem 0 0.1rem
    font-size: 0.85em
    font-weight: bold
    text-transform: uppercase
    letter-spacing: 1px

.context-menu__arrow
  position: absolute
  display: flex
  justify-content: center
  // TODO should actually be -13px to hide the context menu border
  top: -12px
  left: 0
  right: 0

  &.x--top-right
    justify-content: flex-end
    padding-right: 30px

  &.x--top-left
    justify-content: flex-start
    padding-left: 30px

  &.x--bottom,
  &.x--bottom-left
    top: auto
    bottom: -12px
    > svg, img
      transform: rotate(180deg)

  &.x--bottom-left
    justify-content: flex-start
    padding-left: 1em

/**
Top Bar Context Menu

Different colors for use in the top bar

Markup:
.context-menu.x--top-bar.styleguide-noabsolute
  cf-icon.context-menu__arrow(name="arrow-up")
  ul.context-menu__items
    li Item 1
    li Item 2
    li.pseudo-class-hover Hovered

Styleguide 11.1
*/

$context-menu-top-bar--border = hsl(201, 33%, 66%)

$context-menu-top-bar()
  background-color: $colors.lightest-blue
  margin-top: 13px
  border-color: hsl(201, 33%, 66%)
  > .context-menu__arrow path
    fill: $colors.lightest-blue
    stroke: $context-menu-top-bar--border

.context-menu.x--top-bar
  $context-menu-top-bar()
