@import '../mixins/spinner'

/*
Buttons

Markup:
script
  | $(function () {
  |   $('button.is-loading').on('click', function() {
  |     $(this).toggleClass('is-loading');
  |   });
  | });


Styleguide 4.0
*/
.transparent-button-layer
  background-color: transparent
  position: absolute
  $layer('buttonOverlay')
  margin: 0 !important

@import './buttons-deprecated.styl'


$button-reset()
  color: inherit
  font: inherit
  font-size: inherit
  line-height: normal
  vertical-align: baseline
  padding: 0
  margin: 0
  border: 0
  background: none
  overflow: visible
  user-select: none
  cursor: pointer
  &::-moz-focus-inner
    border: 0
    padding: 0


$cfnext-button($color, $shade, $text = rgba(255,255,255,1))
  $cfnext-button-layout()
  $cfnext-button-colors($color, $text, $shade)
  $cfnext-button-loading($text)

$button-vertical-padding = (10 / 16) * 1rem

$cfnext-button-layout()
  display: inline-block
  padding: $button-vertical-padding 1.5rem
  cursor: pointer
  text-align: center
  font-size: .875rem
  font-weight: 500
  white-space: nowrap
  border: none
  border-radius: 2px
  line-height: $base-line-height


$cfnext-button-loading($text)
  > *
    display: inline-block
  +$spinner-base()
    display: inline-block
  &.is-loading
    &:disabled
      opacity: 1
    +$spinner-active($text)
      margin-left: 5px

$cfnext-button-colors($color, $text, $shade = false)
  background: $color
  transition: all ease-in-out .1s
  &, &:link, &:hover, &:active
    color: $text

  &, &:hover, &:active
    outline: 0

  if ($shade)
    &:hover, &:active, &.active
      background-image: linear-gradient(to bottom, $color, $shade)

  &:disabled, &[aria-disabled=true]
    opacity: 0.4
    background: $color
    box-shadow: none
    cursor: default

$cfnext-button-large()
  font-size: 1.15rem
  padding: 1rem 2.5rem


/*
Action/Secondary Button

This button should be used for actions which are important, but not necessarily
the most important action in the current view

Markup:
button.cfnext-btn-action{{modifier_class}} Action
button.cfnext-btn-action{{modifier_class}}.pseudo-class-hover Action
button.cfnext-btn-action{{modifier_class}}.active Action
button.cfnext-btn-action{{modifier_class}}(disabled) Action
button.cfnext-btn-action{{modifier_class}}.is-loading Action

--large - Large variation

Styleguide 4.1
*/

$btn-action()
  $cfnext-button(linear-gradient(0deg, $colors.blue-dark 0%, $colors.blue-light 100%) no-repeat, false, white)
  background-size: 100% 200%
  border: 1px solid $colors.blue-dark

  &:hover
    background-position: 0 100%
    border-color: $colors.blue-darkest

.cfnext-btn-action,
.cfnext-btn-action--large
  $btn-action()

.cfnext-btn-action--large
  $cfnext-button-large()

/*
Primary Action Button

Used for the most important action in a given context

Markup:
button.cfnext-btn-primary-action{{modifier_class}} Action
button.cfnext-btn-primary-action{{modifier_class}}.pseudo-class-hover Action
button.cfnext-btn-primary-action{{modifier_class}}.active Action
button.cfnext-btn-primary-action{{modifier_class}}(disabled) Action
button.cfnext-btn-primary-action{{modifier_class}}.is-loading Action

--large - Large variation

Styleguide 4.2
*/

$btn-primary()
  $cfnext-button(linear-gradient(0deg, $colors.green-dark 0%, $colors.green-light 100%) no-repeat, false, white)
  background-size: 100% 200%
  border: 1px solid $colors.green-dark

  &:hover
    background-position: 0 100%
    border-color: $colors.green-darkest

.cfnext-btn-primary-action,
.cfnext-btn-primary-action--large
  $btn-primary()

.cfnext-btn-primary-action--large
  $cfnext-button-large()

/*
Secondary Action Button

Used for actions that should complement primary actions or visually less
important actions

Markup:
button.cfnext-btn-secondary-action{{modifier_class}} Action
button.cfnext-btn-secondary-action{{modifier_class}}.pseudo-class-hover Action
button.cfnext-btn-secondary-action{{modifier_class}}.active Action
button.cfnext-btn-secondary-action{{modifier_class}}(disabled) Action
button.cfnext-btn-secondary-action{{modifier_class}}.is-loading Action

--large - Large variation

Styleguide 4.3
*/
$secondary-button-color = hsl(213, 5%, 45%)
$secondary-button-bg = hsl(0, 0%, 93%)
.cfnext-btn-secondary-action,
.cfnext-btn-secondary-action--large
  $cfnext-button($colors.element-light, false, $colors.text-mid)
  border: 1px solid $colors.element-dark

  &:hover,
  &.active
    background-color: $colors.element-mid
    border-color: $colors.element-darkest

  a&:hover, a&:link, a&:visited
    color: $secondary-button-color

  &.active
    box-shadow: inset 0 1px 2px rgba(black, .12)

  > cf-icon[name="plus"]
    circle
      fill: $secondary-button-color
    path
      stroke: $colors.text-mid

.cfnext-btn-secondary-action--large
  $cfnext-button-large()
  padding: calc(1rem - 1px) calc(2.5rem - 1px)

/**
Caution button

Markup:
button.cfnext-btn-caution Be Careful!
button.cfnext-btn-caution.pseudo-class-hover Be Careful!
button.cfnext-btn-caution.active Be Careful!
button.cfnext-btn-caution(disabled) Be Careful!

Styleguide 4.4
*/
.cfnext-btn-caution
  $cfnext-button(linear-gradient(0deg, $colors.red-dark 0%, $colors.red-light 100%) no-repeat, false, white)
  background-size: 100% 200%
  border: 1px solid $colors.red-dark

  &:hover
    background-position: 0 100%
    border-color: $colors.red-darkest


/**
Plain Action Button

Markup:
button.cfnext-btn-primary-action
  | One
button.cfnext-btn-plain
  | Two
button.cfnext-btn-action
  | Three

Styleguide 4.5
*/
$cfnext-button-plain()
  background: none
  $cfnext-button-layout()
  color: $colors.blue
  outline: 0

.cfnext-btn-plain
  $cfnext-button-plain()

/**
Block button

Markup:
p
  | Click here
  button.cfnext-btn-primary-action.x--block Action Button
p
  | Loading
  button.cfnext-btn-primary-action.x--block.is-loading Loading

Styleguide 4.6
*/

$x--block()
  display: block
  width: 100%
  position: relative
  &:after
    transition: none
    border-width: 0

$cfnext-block-button-loading()
  &:after
    position: absolute
    transition: opacity .2s linear
    border-width: 2px
    margin-bottom: 0
    top: 11px

.x--block
  $x--block()

  &.is-loading
    $cfnext-block-button-loading()


// DEPRECATED
$cfnext-btn-inline()
  font-size: inherit
  display: inline-block
  vertical-align: baseline
  padding: 0.1em 0.3em
  margin: 0
  border: 0
  background: none
  cursor: pointer
  color: $colors.blue

.cfnext-btn-inline
  $cfnext-btn-inline()


/**
Link Style Button

Markup:
button.cfnext-btn-link
  | Action
p
button.cfnext-btn-link(disabled)
  | Disabled

Styleguide 4.7
*/

.cfnext-btn-link
  $button-reset();
  display: block
  color: $colors.blue-mid
  transition: all ease-in-out .1s

  &:not(:disabled):hover
    color: $colors.blue-darkest

  &:disabled
    cursor: not-allowed
    opacity: .5


/*
Buttons with icons

Markup:
p
  button.cfnext-btn-action
    cf-icon.btn-icon.inverted(name="plus")
    | Action
p
  button.cfnext-btn-action--large-popout-icon
    cf-icon(name="new-ct")
    | Action

Styleguide 4.8
*/

$btn-icon()
  display: inline-block
  float: left
  margin-right: 0.55em
  margin-left: -0.7em
  > svg
    display: block

.btn-icon
  $btn-icon()


$cfnext-button--large-popout-icon()
  $cfnext-button-large()
  padding-left: 5.0rem
  cf-icon
    position: absolute
    left: 1.0rem
    top: -0.5rem

.cfnext-btn-action--large-popout-icon
  position: relative
  $btn-action()
  $cfnext-button--large-popout-icon()


/*
Buttons with dropdowns

Markup:
button.cfnext-btn-secondary-action.cfnext-btn--dropdown
  cf-icon.btn-dropdown-icon(name="dd-arrow-down")
  | More
button.cfnext-btn-action.cfnext-btn--dropdown
  cf-icon.btn-dropdown-icon(name="dd-arrow-down")
  | More
button.cfnext-btn-primary-action.cfnext-btn--dropdown
  cf-icon.btn-dropdown-icon(name="dd-arrow-down")
  | More

Styleguide 4.9
*/

.btn-dropdown-icon,
.btn-dropdown-icon--up
  float: right
  margin-left: 0.4em
  margin-right: -0.2em
  svg
    display: inline-block

.btn-dropdown-icon--up
  transform: rotate(180deg)

.cfnext-btn-secondary-action cf-icon path
  fill: $colors.text-mid


/*
Action Selector

Click on the lower button to toggle the state. Click on the upper arrow to toggle the dropdown.

Markup:
div(style="width: 24em")
  div.btn-action-select
    button.btn-action-select__action.is-loading
      | Publish
    button.btn-action-select__selector(cf-context-menu-trigger)
      span.btn-action-select__selector-label
        | Change actions
      cf-icon.btn-action-select__icon(name="dd-arrow-down")
    .context-menu(cf-context-menu="bottom-right")
      cf-icon.context-menu__arrow.x--top-right(name="arrow-up")
      div(role="menuitem") Another action
  p
  div.btn-action-select.x--no-action
    button.btn-action-select__action
      | Publish
    button.btn-action-select__selector
      span.btn-action-select__selector-label
        | Change actions
      cf-icon.btn-action-select__icon(name="dd-arrow-down")
script
  | $('.btn-action-select.x--no-action').click(function () {
  |   $(this).toggleClass('x--no-action')
  | })

Styleguide 4.10
*/


.btn-action-select
  display: flex
  overflow: hidden
  border-radius: 2px

  &__selector,
  &__action
    $btn-primary()
    flex: 1 1 auto
    transition: all ease-in-out .6s
    border-radius: 0

  &__action
    border-right: none
    overflow: hidden
    width: 100%

  &__selector
    width: 4em
    white-space: nowrap
    overflow: hidden
    padding-left: 0
    padding-right: 0

  &__icon
    display: inline-block
    margin: 0 .4em

  &__selector-label
    display: none


.btn-action-select.x--no-action

  .btn-action-select__action
    width: 0
    padding-left: 0
    padding-right: 0
    // This hides the border
    margin-left: -1px

  .btn-action-select__selector
    width: 100%

  .btn-action-select__selector-label
    display: inline
