.tab-header
  .tab-header__title
    h1
      | Entries
      a(cf-knowledge-base-icon
        tooltip="Learn more about Entries in the Knowledge Base Pages"
        tooltip-container=".entity-list"
        analytics-event="entries"
        href="https://contentful.zendesk.com/hc/en-us/articles/200513208-What-is-an-Entry-")

  .tab-header__search.search-area--with-filter
    .btn.btn--tertiary.select-box
      .select-box__wrapper
        select.u-truncate(ng-model="context.view.contentTypeId"
                ng-change="selectedContentType()"
                ng-options="ct.getId() as ct.getName() group by getGroupName() for ct in spaceContext.publishedContentTypes")
          option(value="") All
      i.button-icon-right.fa.fa-caret-down

    .l-search-w-autocomplete(
      cf-tokenized-search="context.view.searchTerm"
      search-content-type="getSearchContentType()"
      placeholder="Search for {{typeNameOr('Entries')}}"
      cf-on-blur-component="leftSearch($event)"
      cf-on-blur-component-when="showAutocompletions")

    .search-results-position(cf-search-results-position paginator="paginator" ng-hide="!paginator.numEntries")

  .tab-header__actions.add-entity(ng-hide="spaceContext.publishedContentTypes.length == 0 || entries.length == 0")
    button.btn.btn--primary.u-truncate(
            ng-hide="!singleContentType || permissionController.get('createEntry', 'shouldHide')"
            ng-disabled="permissionController.get('createEntry', 'shouldDisable')"
            cf-when-disabled="permissionController.entityActions.createEntry"
            ng-click="entityCreationController.newEntry(singleContentType, 'frameButton')")
      i.fa.fa-plus.button-icon
      | Add New {{singleContentType.getName()}}
    .dropdown-btn(ng-hide="singleContentType")
      button.btn.btn--primary.u-truncate(cf-dropdown-toggle="entryList.add"
          ng-hide="permissionController.get('createEntry', 'shouldHide')"
          ng-disabled="permissionController.get('createEntry', 'shouldDisable')"
          cf-when-disabled="permissionController.entityActions.createEntry")
        i.fa.fa-plus.button-icon
        | Add New Entry
      .dropdown-menu(cf-dropdown-menu="entryList.add" cf-dropdown-position="bottomcenter")
        ul.add-entity__list
          li.dropdown-menu-item.type(ng-repeat="contentType in spaceContext.publishedContentTypes track by contentType.getId()"
                   ng-click="entityCreationController.newEntry(contentType, 'frameButton')"
                   cf-dropdown-close)
            i.fa.fa-plus
            | {{contentType.getName()}}

.tab-main
  .left-nav
    div.menu-with-buttons(cf-view-menu="uiConfig.entryListViews" current-view="context.view" ng-show="uiConfig")
  .with-left-nav
    table.result-list.main-results.main-header
      thead
        tr
          th.cell-select
            input(type="checkbox" cf-selection ng-show="entries.length > 0" tabindex="-1")
          th.cell-content-type(ng-show="!context.view.contentTypeId && !context.view.contentTypeHidden") Content Type
          th.cell-display-name(ng-if="!context.view.contentTypeId || !displayFieldForFilteredContentType()") Name
          th.cell-display-name(ng-if="context.view.contentTypeId && displayFieldForFilteredContentType()" ng-init="field=displayFieldForFilteredContentType()" cf-field-order-header="displayField")
          th(ng-repeat="field in displayedFields track by field.id" cf-field-order-header data-field-id="{{field.id}}" ng-class="[getFieldClass(field)]")
          th.cell-status Status
    .view-customizer(cf-view-customizer)

    .main-results-wrapper.endless-container(cf-endless-container at-bottom="loadMore()" num-elements="paginator.page")
      table.result-list.main-results.animated
        tbody
          tr(ng-repeat="entry in visibleEntries = (entries | filter:visibleInCurrentList) track by entry.getId()"
              ng-init="entityNavState='spaces.detail.entries.detail({ entryId: entry.getId() })'"
              ui-sref="{{entityNavState}}")
            td.cell-select(ng-click="selection.toggle(entry);$event.stopPropagation()")
              input(type="checkbox" cf-selection="entry" tabindex="-1")
            td.cell-content-type(ng-show="!context.view.contentTypeId && !context.view.contentTypeHidden")
              a.entity-list-link(ui-sref="{{entityNavState}}") {{spaceContext.publishedTypeForEntry(entry).getName()}}
            td.cell-display-name
              a.entity-list-link(ui-sref="{{entityNavState}}") {{spaceContext.entryTitle(entry)}}
            td(ng-repeat="field in displayedFields track by field.id" ng-class="[getFieldClass(field), getFieldCollapsedClass(field)]")
              cf-field-display(ng-hide="isFieldCollapsed(field)")
              button.transparent-button(cf-click-local="expandColumn(field)" ng-show="isFieldCollapsed(field)")
                | &hellip;
            td.cell-status(ng-class="entityStatusController.getClassname(entry)")
              a.entity-list-link(ui-sref="{{entityNavState}}")
                .status-label {{entityStatusController.getLabel(entry)}}
                .status-bar
      .loading(ng-hide="paginator.atLast()")

    .advice(ng-show="visibleEntries | isEmpty")
      .advice__frame(ng-show="hasQuery()")
        i.fa.fa-search.fa-flip-horizontal.advice__giant-icon
        header.advice__title There are no matches to your search
      .advice__frame(ng-show="!hasQuery()")
        i.fa.fa-file.advice__giant-icon
        header.advice__title You have no Entries yet.
        p.advice__description(ng-show="spaceContext.publishedContentTypes.length == 0")
          | Entries are your content itself. These depend on the field types you created in the Content Type editor.
        button.btn.btn--primary(type="button" ng-click="entityCreationController.newContentType('frameButton')"
            ng-hide="spaceContext.publishedContentTypes.length > 0 || permissionController.get('createContentType', 'shouldHide')"
            ng-disabled="permissionController.get('createContentType', 'shouldDisable')"
            cf-when-disabled="permissionController.entityActions.createContentType")
          | Create a Content Type
        p(ng-hide="spaceContext.publishedContentTypes.length == 0")
          button.btn.btn--primary(
                  ng-hide="!singleContentType || permissionController.get('createEntry', 'shouldHide')"
                  ng-disabled="permissionController.get('createEntry', 'shouldDisable')"
                  cf-when-disabled="permissionController.entityActions.createEntry"
                  ng-click="entityCreationController.newEntry(singleContentType, 'frameButton')")
            i.fa.fa-plus.button-icon
            | Add New {{singleContentType.getName()}}
          button.btn.btn--primary(
              ng-hide="singleContentType || permissionController.get('createEntry', 'shouldHide')"
              ng-disabled="permissionController.get('createEntry', 'shouldDisable')"
              cf-when-disabled="permissionController.entityActions.createEntry"
              ng-click="showNewContentTypeDialog()")
            i.fa.fa-plus.button-icon
            | Add New Entry
        a.knowledge-base-link(target="_blank" href="https://contentful.zendesk.com/hc/en-us/articles/200513208-What-is-an-Entry-")
          | Visit the Knowledge Base Pages
          i.fa.fa-question-circle

.tab-actions
  .label {{selection.size()}} Entries selected
  .button-set(ng-controller="EntryListActionsController" ng-hide="selection.isEmpty()")
    button.btn.btn--secondary.duplicate(type="button" ng-click="duplicateSelected()" ng-show="showDuplicate()") Duplicate
    | 
    button.btn.btn--secondary.delete(type="button" ng-show="showDelete()" cf-dropdown-toggle="entryList.delete") Delete
    .delete-confirm(cf-dropdown-menu="entryList.delete" cf-dropdown-position="topcenter")
      p You are about to delete {{selection.size()}} Entries
      button.btn.btn--danger(type="button" ng-click="deleteSelected()" cf-dropdown-close) Delete 
      button.btn.btn--secondary(type="button" cf-dropdown-close) Don't Delete 
    | 
    button.btn.btn--secondary.archive(  type="button" ng-click="archiveSelected()"   ng-show="showArchive()"  ) Archive
    | 
    button.btn.btn--secondary.unarchive(type="button" ng-click="unarchiveSelected()" ng-show="showUnarchive()") Unarchive
    | 
    button.btn.btn--secondary.unpublish(type="button" ng-click="unpublishSelected()" ng-show="showUnpublish()") Unpublish
    | 
    button.btn.btn--primary.publish(  type="submit" ng-click="publishSelected()"   ng-show="showPublish()"  ) {{publishButtonName()}}
