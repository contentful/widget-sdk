.tab-header
  .tab-header__title
    cf-icon(name="page-media")
    h1
      | Media Library
      a(cf-knowledge-base-icon
        analytics-event="assets"
        href="https://contentful.zendesk.com/hc/en-us/articles/200513308-What-is-an-Asset-")


  .tab-header__search.search-area
    .l-search-w-autocomplete(
      cf-tokenized-search="context.view.searchTerm"
      search-content-type="assetContentType"
      placeholder="Search for Assets")

    .search-results-position(cf-search-results-position paginator="searchController.paginator" ng-hide="!searchController.paginator.numEntries")

  .tab-header__actions.add-entity
    .dropdown-btn(ng-show="assets.length > 0")
      button.cfnext-btn-action.u-truncate(cf-dropdown-toggle="assetList.add"
          ng-hide="permissionController.get('createAsset', 'shouldHide')"
          ng-disabled="permissionController.get('createAsset', 'shouldDisable')"
          cf-when-disabled="permissionController.entityActions.createAsset")
        i.fa.fa-plus.button-icon
        | Add New Asset
      .dropdown-menu(cf-dropdown-menu="assetList.add" cf-dropdown-position="bottomcenter" container=".view-content")
        ul.add-entity__list
          li.dropdown-menu-item.type(ng-click="entityCreationController.newAsset()" cf-dropdown-close)
            i.fa.fa-plus.add-entity__icon
            | Single Asset
          li.dropdown-menu-item.type(ng-click="createMultipleAssets()" cf-dropdown-close)
            i.fa.fa-plus.add-entity__icon
            | Multiple Assets

.tab-main
  .left-nav
    div.menu-with-buttons(cf-view-menu="uiConfig.assetListViews" current-view="context.view" ng-show="uiConfig")

  .with-left-nav
    table.result-list.main-results.main-header
      thead
        tr
          th.cell-select
            input(type="checkbox" cf-selection ng-show="assets.length > 0" tabindex="-1")
          th.cell-preview Preview
          th.cell-name Name
          th.cell-type Type
          th.cell-updated Updated
          th.cell-author By
          th.cell-status Status

    .main-results-wrapper.endless-container(cf-endless-container at-bottom="searchController.loadMore()" num-elements="searchController.paginator.page")
      table.result-list.main-results
        tbody
          tr(ng-repeat="asset in visibleAssets = (assets | filter:visibleInCurrentList) track by asset.getId()"
              ng-init="entityNavState='spaces.detail.assets.detail({ assetId: asset.getId() })'"
              ui-sref="{{entityNavState}}")
            td.cell-select(ng-click="selection.toggle(asset);$event.stopPropagation()")
              input(type="checkbox" cf-selection="asset" tabindex="-1")
            td.cell-preview(ng-class="{'no-padding': (!!file)}")
              div.file-preview(cf-file-preview file="spaceContext.localizedField(asset, 'data.fields.file')" preview-size="400")
                span.cf-thumbnail(cf-thumbnail file="file" size="30" ng-if="file")
            td.cell-name
              a.entity-list-link(ui-sref="{{entityNavState}}") {{spaceContext.assetTitle(asset)}}
            td.cell-type(ng-init="file=spaceContext.localizedField(asset, 'data.fields.file')")
              a.entity-list-link(ui-sref="{{entityNavState}}")
                span {{file|fileType}}
                span.extension {{file|fileExtension}}
            td.cell-updated
              a.entity-list-link(ui-sref="{{entityNavState}}")
                date(ng-if="asset.getUpdatedAt()" datetime="{{asset.getUpdatedAt()}}" cf-relative-datetime)
            td.cell-author
              a.entity-list-link(cf-user link="asset.getUpdatedBy()" as="updater" ui-sref="{{entityNavState}}")
                | {{updater | userNameDisplay:user}}
            td.cell-status(ng-class="entityStatusController.getClassname(asset)")
              a.draft-wrapper.entity-list-link(ui-sref="{{entityNavState}}")
                .status-label {{entityStatusController.getLabel(asset)}}
                .status-bar
      .loading(ng-hide="searchController.paginator.atLast()")

    .advice(ng-show="visibleAssets | isEmpty")
      .advice__frame(ng-show="hasQuery()")
        i.fa.fa-search.fa-flip-horizontal.advice__giant-icon
        header.advice__title There are no matches to your search
      .advice__frame(ng-show="!hasQuery()")
        i.fa.fa-paperclip.advice__giant-icon
        header.advice__title You have no Assets yet.
        p.advice__description Assets are external documents that you can link to your Entries. They can be any file you wish, form sounds to images or videos to text documents.
        .dropdown-btn
          button.cfnext-btn-action(cf-dropdown-toggle="assetList.addFromFrame"
            ng-hide="permissionController.get('createAsset', 'shouldHide')"
            ng-disabled="permissionController.get('createAsset', 'shouldDisable')"
            cf-when-disabled="permissionController.entityActions.createAsset")
            | Create an Asset
          .dropdown-menu(cf-dropdown-menu="assetList.addFromFrame" cf-dropdown-position="bottomcenter")
            ul.add-entity__list
              li.dropdown-menu-item.type(ng-click="entityCreationController.newAsset()" cf-dropdown-close)
                i.fa.fa-plus
                | Single Asset
              li.dropdown-menu-item.type(ng-click="createMultipleAssets()" cf-dropdown-close)
                i.fa.fa-plus
                | Multiple Assets


        a.knowledge-base-link(target="_blank" href="https://contentful.zendesk.com/hc/en-us/articles/200513308-What-is-an-Asset-")
          | Visit the Knowledge Base Pages
          i.fa.fa-question-circle

.tab-actions
  .label {{selection.size()}} Assets selected
  .button-set(ng-controller="AssetListActionsController" ng-hide="selection.isEmpty()")
    button.cfnext-btn-secondary-action.delete(type="button" ng-show="showDelete()" cf-dropdown-toggle="assetList.delete") Delete
    .delete-confirm(cf-dropdown-menu="assetList.delete" cf-dropdown-position="topcenter")
      p You are about to delete {{selection.size()}} Assets
      button.cfnext-btn-caution(type="button" ng-click="deleteSelected()" cf-dropdown-close) Delete 
      button.cfnext-btn-secondary-action(type="button" cf-dropdown-close) Don't Delete 
    button.cfnext-btn-secondary-action.archive(type="button" ng-click="archiveSelected()"   ng-show="showArchive()"  ) Archive
    button.cfnext-btn-secondary-action.unarchive(type="button" ng-click="unarchiveSelected()" ng-show="showUnarchive()") Unarchive
    button.cfnext-btn-secondary-action.unpublish(type="button" ng-click="unpublishSelected()" ng-show="showUnpublish()") Unpublish
    button.cfnext-btn-secondary-action.publish(  type="submit" ng-click="publishSelected()"   ng-show="showPublish()"  ) {{publishButtonName()}}
