.modal-background
  .modal-dialog.entity-selector-dialog(ng-controller="EntitySelectorController")
    header.modal-dialog__header
      h1 {{ labels.title }}
      button.modal-dialog__close(ng-click="dialog.cancel()")

    .modal-dialog__content
      .entity-selector__input-label
        p {{ labels.input }}
        p(ng-if="config.multiple")
          a(href ng-click="view.mode = SELECTED" ng-if="view.mode === AVAILABLE")
            | Show {{ labels.selected }} ({{ selected.length }})
          a(href ng-click="view.mode = AVAILABLE" ng-if="view.mode === SELECTED")
            | Hide {{ labels.selected }} ({{ selected.length }})

      .entity-selector__search(
        cf-tokenized-search="view.searchTerm"
        search-content-type="singleContentType"
        placeholder="Type to search, press down arrow key for help"
        cf-on-blur-component="leftSearch($event)"
        cf-on-blur-component-when="showAutocompletions")

      .entity-selector__item-list.endless-container(
        ng-if="view.mode === AVAILABLE"
        cf-endless-container
        at-bottom="loadMore()"
        num-elements="paginator.page")
        .entity-selector__item-list-placeholder(ng-if="!isLoading && items.length < 1")
          | {{ labels.empty }} found
          span(ng-if="view.searchTerm.length > 0")
            |  for <strong>{{ view.searchTerm }}</strong>

        cf-entity-link(
          ng-if="config.linksEntry"
          ng-repeat="link in links track by link.sys.id"
          links-api="linksApi"
          link="link"
          show-details="true"
          selectable="true")

        cf-asset-card(
          ng-if="config.linksAsset"
          ng-repeat="link in links track by link.sys.id"
          links-api="linksApi"
          link="link"
          selectable="true")

        .loading(ng-show="isLoading")

      .entity-selector__item-list(ng-if="view.mode === SELECTED")
        .entity-selector__item-list-placeholder(ng-if="selected.length < 1")
          | {{ labels.empty }} selected yet

        cf-entity-link(
          ng-if="config.linksEntry"
          ng-repeat="link in selected track by link.sys.id"
          links-api="linksApi"
          link="link"
          show-details="true"
          selectable="true")

        cf-asset-card(
          ng-if="config.linksAsset"
          ng-repeat="link in selected track by link.sys.id"
          links-api="linksApi"
          link="link"
          selectable="true")

      .note-box-small.note-box--blue(
        ng-if="!config.multiple"
        ng-bind="labels.info")

    .modal-dialog__controls(ng-if="config.multiple")
      button.cfnext-btn-primary-action.modal-dialog__controls-confirm(
        type="button"
        ng-click="dialog.confirm(selected)"
        ng-disabled="selected.length < config.min || selected.length > config.max")
        | Insert {{ labels.selected }}
        span(ng-if="selected.length > 0") &nbsp;({{ selected.length }})
