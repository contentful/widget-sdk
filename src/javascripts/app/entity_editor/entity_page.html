<div class="workbench">
  <div
    class="workbench-layer animate"
    ng-class="getLayerClasses($index)"
    ng-style="{ left: 170 / slideStates.length * $index + 'px' }"
    ng-repeat="slideState in slideStates track by slideState.key"
    data-test-id="slide-in-{{ $index === 0 ? 'base' : 'layer' }}"
  >
    <div
      class="workbench-layer__editor-container"
      watchers-toggler="!isTopLayer($index) &amp;&amp; loaded"
      ng-mouseenter="initPeeking($index)"
    >
      <div ng-if="!slideState.viewProps" style="height: 100%;">
        <react-component name="app/entity_editor/EmptyState" props="{slideState}"></react-component>
      </div>
      <div ng-if="slideState.viewProps">
        <react-component
          ng-if="slideState.slide.type === 'BulkEditor'"
          data-test-id="bulk-editor-container"
          name="app/entity_editor/bulk_editor/BulkEditor"
          props="{getReferenceContext: getContext(slideState.viewProps.referenceContext)}"
        ></react-component>
        <react-component
          ng-if="slideState.slide.type === 'Entry'"
          name="app/entry_editor/EntryEditor"
          props="{
            currentSlideLevel: Object.keys(slideStates || {}).length,
            getViewProps: getContext(slideState.viewProps),
            fieldController,
            fields
          }"
        ></react-component>
        <cf-asset-editor
          ng-if="slideState.slide.type === 'Asset'"
          editor-data="slideState.viewProps.editorData"
          preferences="slideState.viewProps.preferences"
        ></cf-asset-editor>
      </div>
      <div
        class="workbench-layer__overlay"
        ng-style="{opacity: (-$index / slideStates.length) + 0.8}"
        ng-if="!isTopLayer($index)"
        ng-click="close(slideState.slide)"
        ng-mouseenter="peekIn($index)"
        ng-mouseleave="peekOut()"
      ></div>
    </div>
  </div>
</div>
