.workbench
  div(
    class="workbench-layer workbench-layer--{{ $index }} animate"
    ng-style="{width: 'calc(100% - (170 / ' + entities.length + ') * ' + $index + 'px)'}"
    ng-repeat="entity in entities track by $index"
    ng-class="{'workbench-layer--is-current': ($index + 1) === entities.length}"
    data-test-id="slide-in-{{ $index === 0 ? 'base' : 'layer' }}"
  )
    cf-entry-editor(
      ng-if="entity.type === 'Entry'"
      entry-id="entity.id"
      preferences="preferences"
      ng-mouseenter="initPeeking($index)"
    )
    cf-asset-editor(
      ng-if="entity.type === 'Asset'"
      asset-id="entity.id"
      preferences="preferences"
      ng-mouseenter="initPeeking($index)"
    )
    .workbench-layer__overlay(
      ng-style="{opacity: (-$index / entities.length) + 0.8}"
      ng-if="($index + 1) !== entities.length"
      ng-click="close(entity)"
      ng-mouseenter="peekIn($index)"
      ng-mouseleave="peekOut()"
    )
