<div class="workbench sticky-parent">
  <react-component
    name="app/entity_editor/bulk_editor/BulkEditorHeader"
    props="{fieldName: referenceContext.field.name, linkCount: data.linkCount, onClose: newCloseWithReason('bulk_editor_close'), onBack: newCloseWithReason('arrow_back')}"
  ></react-component>
  <div class="workbench-main">
    <div class="workbench-main__content" ng-show="!data.loaded" style="padding-top: 0;">
      <react-component
        ng-if="entityContexts.length > 0"
        name="ui/Loader"
        props="{isShown: true, message: 'Loading entries...'}"
      ></react-component>
      <div class="empty-state" ng-if="entityContexts.length === 0">
        <div class="empty-state__description">There are no entries linked yet.</div>
      </div>
    </div>
    <div class="workbench-main__content" ng-show="data.loaded" style="padding-top: 0;">
      <!-- Safari and Edge need a relative container for dropdowns to work: -->
      <div
        style="position: relative;"
        ng-repeat="ctx in entityContexts track by ctx.key"
        data-entity-id="{{ctx.id}}"
      >
        <cf-bulk-entity-editor
          entity-context="ctx"
          bulk-editor-context="editorContext"
          locale-data="localeData"
        ></cf-bulk-entity-editor>
      </div>
    </div>
    <div class="workbench-main__sidebar f36-padding--m">
      <div class="entity-sidebar">
        <h2 class="entity-sidebar__heading">Entries</h2>
        <div class="entity-sidebar__help-text" ng-if="data.linkCount &gt; 1">
          There are {{ data.linkCount }} linked entries in
          <em>{{ referenceContext.field.name }}</em>.
        </div>
        <div class="entity-sidebar__help-text" ng-if="data.linkCount == 1">
          There is 1 linked entry in <em>{{ referenceContext.field.name }}</em>.
        </div>
        <div class="entity-sidebar__help-text">
          <react-component
            name="components/CreateEntryButton/CreateEntryLinkButton"
            props="{contentTypes: actions.allowedCTs, onSelect: actions.addNewEntry, text: 'Create new entry and link', hasPlusIcon: true}"
          ></react-component>
        </div>
        <div class="entity-sidebar__help-text">
          <button
            class="btn-link"
            data-test-id="add-existing-entry"
            ng-click="actions.addExistingEntries()"
            type="button"
          >
            <cf-icon class="btn-link__icon" name="link"></cf-icon
            ><span>Link an existing entry</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
