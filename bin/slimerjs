#!/bin/bash
#
# Run vendored SlimerJS with vendored Firefox 46
#

REPO_ROOT="$(readlink --canonicalize "$(dirname $0)/../")"
export SLIMERJSLAUNCHER="${REPO_ROOT}/vendor/firefox/firefox"
if [[ ! -x "${SLIMERJSLAUNCHER}" ]]; then
  echo "${SLIMERJSLAUNCHER} is not executable" 1>&2
  echo "Please run 'bin/install-firefox'" 1>&2
  exit 1
fi

SLIMERJS_BIN="${REPO_ROOT}/vendor/slimerjs/slimerjs-0.10.0/slimerjs"
if [[ ! -x "${SLIMERJS_BIN}" ]]; then
  echo "${SLIMERJS_BIN} is not executable"
  echo "Please run 'bin/install_slimerjs'"
  exit 1
fi

exec "${SLIMERJS_BIN}" "$@"
